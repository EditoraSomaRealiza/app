<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Ora√ß√£o Gerada</title>
  <style>
    body {
      font-family: Georgia, serif;
      background: #eaf4f1;
      padding: 40px;
      line-height: 1.6;
    }
    #oracao {
      background: #ffffff;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0px 0px 12px #ccc;
    }
    .botoes {
      margin-top: 20px;
    }
    button {
      padding: 10px;
      font-size: 16px;
      margin-right: 10px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h1>Ora√ß√£o Especial</h1>
  <div id="oracao"></div>

  <div class="botoes">
    <button onclick="window.print()">üñ®Ô∏è Imprimir</button>
    <button onclick="compartilhar()">üì§ Compartilhar</button>
    <button onclick="gerarImagem()">üñºÔ∏è Baixar como imagem</button>
  </div>

  <!-- Biblioteca html2canvas -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

  <script>
    const textos = {
      cura: [
        "Senhor, toque com Teu poder de cura esta vida que necessita de um milagre f√≠sico e espiritual.",
        "Pai amado, cura toda dor, enfermidade e tristeza com Teu amor poderoso."
      ],
       cura1: [
        "Breve.",
        ],
      cura2: [
        "Breve.",
        ],
      libertacao: [
        "Deus, quebra todas as correntes e liberta este cora√ß√£o do que o aprisiona.",
        "Que Tua luz dissipe toda escurid√£o e traga liberdade completa."
      ],
      libertacao1: [
        "Breve.",
        ],
      libertacao2: [
        "Breve.",
        ],
      libertacao3: [
        "Breve.",
        ],
      agradecimento: [
        "Gratid√£o, Senhor, por tantas b√™n√ß√£os. Continue a agir poderosamente nesta vida.",
        "Obrigado, Deus, pela resposta recebida. Que esta ora√ß√£o seja um louvor ao Teu nome."
      ],
      agradecimento1: [
        "Breve.",
        ],
      agradecimento2: [
        "Breve.",
        ],
      agradecimento3: [
        "Breve.",
        ],
      agradecimento4: [
        "Breve.",
        ],
      agradecimento5: [
        "Breve.",
        ],
      agradecimento6: [
        "Breve.",
        ],
      agradecimento7: [
        "Breve.",
        ],
      agradecimento8: [
        "Breve.",
        ],
      agradecimento9: [
        "Breve.",
        ],
      familia: [
        "Senhor, aben√ßoa esta fam√≠lia com uni√£o, paz e amor em abund√¢ncia.",
        "Cuida, Pai, dos lares e dos cora√ß√µes, trazendo cura e reconcilia√ß√£o."
      ],
      familia1: [
        "Breve.",
        ],
      financas: [
        "Deus provedor, abre portas onde n√£o h√°, envia sustento e sabedoria financeira.",
        "Confio em Ti, Senhor, para transformar a √°rea financeira desta vida com Tua provis√£o."
      ],
      financas1: [
        "Deus provedor, abre portas onde n√£o h√°, envia sustento e sabedoria financeira.",
        "Confio em Ti, Senhor, para transformar a √°rea financeira desta vida com Tua provis√£o."
      ],
      financas2: [
        "Deus provedor, abre portas onde n√£o h√°, envia sustento e sabedoria financeira.",
        "Confio em Ti, Senhor, para transformar a √°rea financeira desta vida com Tua provis√£o."
      ]
    };

    const encerramentos = [
      "Em nome de Jesus, am√©m.",
      "Que assim seja, para a gl√≥ria de Deus.",
      "Glorificado seja o Teu nome, Senhor!"
    ];

    const dados = JSON.parse(localStorage.getItem("dadosOracao"));
    const nome = dados.tipo === "eu" ? dados.quemPede : dados.quemRecebe;
    const intro = `Esta ora√ß√£o foi pedida por <strong>${dados.quemPede}</strong> ${dados.tipo === "eu" ? "atendida agora" : `para <strong>${dados.quemRecebe}</strong>`}.`;
    const sentimento = dados.sentimento ? ` Que neste momento est√° se sentindo: <em>${dados.sentimento}</em>.` : "";
    const motivoTexto = textos[dados.motivo] || ["Senhor, Tu conheces o cora√ß√£o e sabes o que √© preciso."];
    const oracao = `${motivoTexto[Math.floor(Math.random() * motivoTexto.length)]}${sentimento}`;
    const final = encerramentos[Math.floor(Math.random() * encerramentos.length)];

    document.getElementById("oracao").innerHTML = `
      <p>${intro}</p>
      <p>${oracao}</p>
      <p><strong>${final}</strong></p>
    `;

    // Compartilhamento nativo
    function compartilhar() {
      const textoCompartilhamento = `${dados.quemPede} fez esta ora√ß√£o:\n\n${oracao}\n\n${final}`;
      if (navigator.share) {
        navigator.share({
          title: 'Ora√ß√£o Gerada',
          text: textoCompartilhamento
        }).catch(err => console.log('Erro ao compartilhar:', err));
      } else {
        alert("Compartilhamento n√£o suportado neste navegador. Copie e cole o texto manualmente.");
      }
    }

    // Gera imagem da ora√ß√£o
    function gerarImagem() {
      html2canvas(document.querySelector("#oracao")).then(canvas => {
        const link = document.createElement("a");
        link.download = "oracao.png";
        link.href = canvas.toDataURL();
        link.click();
      });
    }
  </script>
</body>
</html>
